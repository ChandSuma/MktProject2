library(AlgDesign)
desFull <- gen.factorial( levels=c(3,3,2,2), nVars=4, varNames=c("attr1","attr2","feat1","feat2"), center=FALSE)
print(desFull)
fml = ~ factor(attr1) + factor(attr2) + factor(feat1) + factor(feat2)
desDummies = model.matrix(fml, data=des)
colnames(desDummies) = paste0("D",(1:dim(desDummies)[2]))
print(desDummies)
desFract = optFederov(~ . -1,data=desDummies,nTrials=12)
print(desFract)
eval.design(~.-1, desFract$design)

#Check dummies for model with just main effects
desD1 = model.matrix(~factor(attr1) + factor(attr2), data=desFull)
print(desD1)
y = desD1*c(1,.2,.3,.4)+rnorm(6,sd=.1) 
res1a = lm(y~factor(attr1) + factor(attr2), data=desFull) 
print(summary(res1a))
